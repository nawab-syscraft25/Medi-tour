<!DOCTYPE html>
<html>
<head>
    <title>Price Toggle Test - Updated</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .price-field-hidden { display: none !important; }
        .price-field-visible { display: flex !important; }
        #price_range_fields, #price_exact_field { transition: all 0.3s ease-in-out; }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h3>Price Toggle Test - Updated Version</h3>
        <p class="text-muted">Check browser console for debug information</p>
        
        <div class="mb-3">
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="price_type" id="price_range" value="range" checked>
                <label class="form-check-label" for="price_range">
                    <i class="fas fa-chart-line me-1"></i> Price Range
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="price_type" id="price_exact_radio" value="exact">
                <label class="form-check-label" for="price_exact_radio">
                    <i class="fas fa-tag me-1"></i> Exact Price
                </label>
            </div>
        </div>

        <div class="row mb-3 price-field-visible" id="price_range_fields">
            <div class="col-md-6">
                <label class="form-label">Minimum Price (₹)</label>
                <input type="number" class="form-control" id="price_min" placeholder="1000.00">
            </div>
            <div class="col-md-6">
                <label class="form-label">Maximum Price (₹)</label>
                <input type="number" class="form-control" id="price_max" placeholder="5000.00">
            </div>
        </div>

        <div class="row mb-3 price-field-hidden" id="price_exact_field">
            <div class="col-md-6">
                <label class="form-label">Exact Price (₹)</label>
                <input type="number" class="form-control" id="price_exact" placeholder="2500.00">
            </div>
        </div>
        
        <div class="alert alert-info">
            <strong>Test Instructions:</strong>
            <ol>
                <li>Open browser console (F12)</li>
                <li>Click between "Price Range" and "Exact Price" radio buttons</li>
                <li>Observe the field visibility changes and console logs</li>
            </ol>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
    <script>
        const priceRangeRadio = document.getElementById('price_range');
        const priceExactRadio = document.getElementById('price_exact_radio');
        const priceRangeFields = document.getElementById('price_range_fields');
        const priceExactField = document.getElementById('price_exact_field');

        function debugPriceElements() {
            console.log('=== Price Elements Debug ===');
            console.log('priceRangeRadio:', priceRangeRadio);
            console.log('priceExactRadio:', priceExactRadio);
            console.log('priceRangeFields:', priceRangeFields);
            console.log('priceExactField:', priceExactField);
            console.log('Range radio checked:', priceRangeRadio ? priceRangeRadio.checked : 'N/A');
            console.log('Exact radio checked:', priceExactRadio ? priceExactRadio.checked : 'N/A');
        }

        function togglePriceFields() {
            console.log('togglePriceFields called');
            console.log('Price range checked:', priceRangeRadio ? priceRangeRadio.checked : 'not found');
            console.log('Price exact checked:', priceExactRadio ? priceExactRadio.checked : 'not found');
            
            if (priceRangeRadio && priceRangeRadio.checked) {
                console.log('Showing price range fields');
                if (priceRangeFields) {
                    priceRangeFields.classList.remove('price-field-hidden');
                    priceRangeFields.classList.add('price-field-visible');
                }
                if (priceExactField) {
                    priceExactField.classList.remove('price-field-visible');
                    priceExactField.classList.add('price-field-hidden');
                }
                const priceExactInput = document.getElementById('price_exact');
                if (priceExactInput) priceExactInput.value = '';
            } else if (priceExactRadio && priceExactRadio.checked) {
                console.log('Showing exact price field');
                if (priceRangeFields) {
                    priceRangeFields.classList.remove('price-field-visible');
                    priceRangeFields.classList.add('price-field-hidden');
                }
                if (priceExactField) {
                    priceExactField.classList.remove('price-field-hidden');
                    priceExactField.classList.add('price-field-visible');
                }
                const priceMinInput = document.getElementById('price_min');
                const priceMaxInput = document.getElementById('price_max');
                if (priceMinInput) priceMinInput.value = '';
                if (priceMaxInput) priceMaxInput.value = '';
            }
        }

        priceRangeRadio.addEventListener('change', function() {
            console.log('Price range selected');
            togglePriceFields();
        });
        
        priceExactRadio.addEventListener('change', function() {
            console.log('Exact price selected');
            togglePriceFields();
        });
        
        // Initial setup
        setTimeout(function() {
            debugPriceElements();
            togglePriceFields();
            console.log('Initial price field toggle completed');
        }, 100);
    </script>
</body>
</html>